let activeTab=null,startTime=Date.now();function scheduleMidnightReset(){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,0,0,0,0)-e;setTimeout(()=>{chrome.storage.local.set({siteTimes:{}},()=>{console.log("⏰ Site times reset at midnight!")}),scheduleMidnightReset()},t)}setInterval(()=>{chrome.windows.getLastFocused({populate:!0},e=>{if(!e.focused)return;const t=e.tabs.find(e=>e.active&&e.url?.startsWith("http"));if(!t)return;const s=new URL(t.url).hostname;if(s===activeTab){const e=Date.now(),t=(e-startTime)/1e3;startTime=e,chrome.storage.local.get(["siteTimes"],({siteTimes:e})=>{(e=e||{})[activeTab]=(e[activeTab]||0)+t,chrome.storage.local.set({siteTimes:e})})}else activeTab=s,startTime=Date.now()})},5e3),scheduleMidnightReset();